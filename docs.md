# ModCS2: Документация

## Введение: что такое ModCS2 и как он работает

ModCS2 — это удобный менеджер модов для Counter‑Strike (CS2 и CS:GO), который:
- хранит ваши моды в отдельной папке приложения;
- ставит .cfg‑файлы прямо в папку cfg игры;
- подставляет значения биндов из шаблонов с плейсхолдерами вида ${BIND_ID};
- помогает аккуратно прописывать exec в autoexec.cfg и так же аккуратно этот след удалять.

Все настройки (в том числе путь к папке cfg игры и тема интерфейса) сохраняются в конфигурации приложения, так что после первичной настройки вам не придётся повторять путь снова и снова.

---

## 1) Установка мода из ZIP: от нуля до «Готово!»

Сначала — разовая подготовка:
1. Запустите ModCS2.
2. Откройте вкладку «Settings».
3. Укажите путь к папке cfg игры:
   - Для CS2/CS:GO это папка, где лежит ваш autoexec.cfg и прочие .cfg.
   - Нажмите «Browse», выберите папку и сохраните «Save Settings».

Теперь установка:
1. Перейдите во вкладку «Mods».
2. Нажмите «Add Mod».
3. Выберите ZIP‑архив мода. Внутри архива обязательно должен быть файл ModCS2.cfg (регистр не важен).
4. Если мод поддерживает настраиваемые бинды, появится диалог «Configure Mod Binds»:
   - Для каждого пункта нажмите «Set key», чтобы поймать клавишу/кнопку мыши или прокрутку колеса (MWHEELUP/MWHEELDOWN).
   - Если не знаете, что выбрать, оставьте по умолчанию.
   - Подтвердите.
5. ModCS2 установит .cfg‑файлы прямо в папку cfg вашей игры. Если мод просит вызвать определённый конфиг через autoexec (поле autoexec в ModCS2.cfg), менеджер добавит строку exec "имя_файла" в ваш autoexec.cfg, пометив её комментариями, чтобы затем можно было безопасно удалить.

После установки мод появится в таблице «Installed Mods», с датой и кратким описанием. Если в момент установки запущена игра, лучше перезапустить её, чтобы подхватить изменения.

---

## 2) Настройка биндов уже установленного мода

Жизнь — не константа. То, что казалось удобным на «F», через неделю хочется переназначить на «Mouse4». Для этого:
1. Откройте вкладку «Mods».
2. Напротив нужного мода нажмите «Manage» → «Edit Binds…».
3. В диалоге настройки у каждого пункта нажмите «Set key» и введите/нажмите желаемое.
4. Подтвердите.

Что происходит внутри:
- Если мод поставлял шаблонные .cfg с плейсхолдерами (${BIND_ID}), ModCS2 хранит «чистую» копию шаблонов в папке мода и заново пересобирает .cfg в папке игры, подставляя новые значения.
- Если «чистого» шаблона нет, менеджер сделает аккуратную подстановку по месту (in-place), заменив плейсхолдеры в уже установленных файлах.

Совет: если при обновлении биндов никакие файлы не изменились, возможно, вы уже потеряли плейсхолдеры в целевых файлах (например, правили их вручную). В таком случае проще переустановить мод — ModCS2 снова положит «чистые» шаблоны и подставит актуальные клавиши.

---

## 3) Как корректно удалить мод

Удаление не должно оставлять следов. ModCS2 как раз к этому стремится:
1. Во вкладке «Mods» напротив нужного мода нажмите «Manage» → «Uninstall».
2. Подтвердите.

Что будет сделано:
- Все файлы, которые мод установил в папку cfg игры, будут удалены.
- Если мод добавлял строку exec в ваш autoexec.cfg, она будет аккуратно вычищена вместе с соседней служебной строкой‑комментарием.
- Папка мода в хранилище ModCS2 будет удалена.

После удаления, если игра была запущена, рекомендуется перезапуск.

---

## 4) Создаём свой мод: от идеи к ZIP‑архиву

Суть формата проста: один файл «паспорта» мода ModCS2.cfg + ваши .cfg‑файлы. Вы можете использовать плейсхолдеры для биндов, и ModCS2 попросит пользователя указать клавиши.

Структура ZIP может быть плоской, но удобнее держать файлы внутри папки. Главное — в архиве должен быть ModCS2.cfg.

Пример минимального ModCS2.cfg:
```
name="My Cool Mod"
description="Минимальный пример пользовательского мода."
csversion="cs2"
autoexec="my_mod_autoexec.cfg"
```

Если хотите поддержать настраиваемые бинды, добавьте ключ binds со значением JSON (однострочным). Внутри JSON можно указать «label» и «default».

Пример ModCS2.cfg с биндом:
```
name="Knife Quick-Switch"
description="Мгновенное переключение на нож и обратно."
csversion="cs2"
autoexec="knife_autoexec.cfg"
binds={"KNIFE_TOGGLE":{"label":"Toggle knife","default":"Q"}}
```

Теперь сделайте .cfg, где хотите использовать плейсхолдеры:
- Любой плейсхолдер записывается как ${ИМЯ_БИНДА}.
- На установке ModCS2 заменит ${KNIFE_TOGGLE} на выбранную пользователем клавишу.

Пример содержимого knife_autoexec.cfg:
```
echo "Knife Quick-Switch loaded"
bind "${KNIFE_TOGGLE}" "slot3; slot1"
```

Вы можете складывать .cfg в подпапку cfg — ModCS2 поймёт и установит их в папку cfg игры с тем же относительным путём. Несколько примеров структуры:

Вариант 1 (плоский):
```
MyKnifeMod.zip
├─ ModCS2.cfg
└─ knife_autoexec.cfg
```

Вариант 2 (с подпапкой cfg):
```
MyKnifeMod.zip
├─ ModCS2.cfg
└─ cfg
   └─ scripts
      └─ knife_autoexec.cfg
```

Вариант 3 (несколько файлов):
```
MyPack.zip
├─ ModCS2.cfg
├─ my_autoexec.cfg
└─ helpers.cfg
```

Если вы укажете autoexec="my_autoexec.cfg", ModCS2 добавит в autoexec.cfg строки:
```
// ModCS2: My Cool Mod
exec "my_autoexec.cfg"
```
А при удалении корректно их вычистит.

---

## 5) Полезные замечания и тонкости

- Путь к cfg: сперва установите его в «Settings». Приложение проверяет, что это реально существующая папка.
- Регистр в имени ModCS2.cfg не важен: «ModCS2.cfg» и «modcs2.cfg» одинаково корректны.
- При редактировании биндов менеджер старается использовать «чистые» шаблоны из папки мода (он их сохраняет при установке в подкаталог placeholders). Если их нет, выполнит замену по месту.
- Удаление не трогает «чужие» строки в autoexec.cfg — ModCS2 работает только со своими вставками, помеченными комментарием «// ModCS2: …».
- Если в момент установки/удаления игра запущена, изменения могут не примениться до перезапуска игры.
